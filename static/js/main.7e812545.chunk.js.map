{"version":3,"sources":["components/UserInfo/UserInfo.jsx","context.js","components/Header/Theme/Theme.jsx","components/Header/Header.jsx","icons/index.js","components/Icon/Icon.jsx","components/Dialog/Item/Item.jsx","components/Dialog/Title/Title.jsx","components/Dialog/reducer.js","data.js","components/Dialog/Dialog.jsx","components/Dialog/helpers.js","components/Sender/Sender.jsx","App.js","helpers/theme.js","index.js"],"names":["UserInfo","className","AppContext","createContext","Theme","useContext","theme","toggleTheme","onClick","event","currentTarget","dataset","size","Header","MessageReaded","MessageSended","Icon","name","Array","width","height","icons","icon","viewBox","classNames","dangerouslySetInnerHTML","__html","Item","isReverse","isRemovable","messages","avatar","onRemove","onRemoveHandle","id","reverse","removable","src","alt","map","item","text","dayjs","date","format","status","extend","Calendar","Title","calendar","sameDay","lastWeek","sameElse","reducer","state","action","type","filter","message","payload","concat","Error","dialog","is","Dialog","newMessage","dialogRef","useRef","useReducer","data","dispatch","useEffect","setTimeout","current","scrollTop","scrollHeight","length","normalizedDialog","newDialog","forEach","i","diff","push","position","normalizeDialog","ref","key","Sender","onAddMessage","useState","value","setValue","onSubmit","preventDefault","Date","now","toISOString","placeholder","onChange","target","required","App","addMessage","localStorage","getItem","setItem","document","body","classList","add","remove","setTheme","Provider","WebFontLoader","load","google","families","locale","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7e812545.chunk.js","sourcesContent":["import React from 'react';\r\nimport \"./userinfo.css\";\r\n\r\nconst UserInfo = () => {\r\n    return (\r\n        <div className=\"user-info\">\r\n            <div className=\"name\">Chat by Vlad-maker</div>\r\n            <div className=\"status\">\r\n                <span className=\"circle\" />В сети\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserInfo;\r\n","import { createContext } from \"react\";\r\nexport const AppContext = createContext();","import React, { useContext } from \"react\";\r\nimport { AppContext } from \"../../../context\";\r\nimport { IoIosMoon, IoIosSunny } from \"react-icons/io\";\r\nimport \"./theme.css\";\r\n\r\nconst Theme = () => {\r\n  const { theme, toggleTheme } = useContext(AppContext);\r\n\r\n  const onToggleTheme = (event) => {\r\n    const { theme } = event.currentTarget.dataset;\r\n    toggleTheme(theme);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"theme\"\r\n      data-theme={theme === \"light\" ? \"dark\" : \"light\"}\r\n      onClick={onToggleTheme}\r\n    >\r\n      {theme === \"light\" ? (\r\n        <IoIosMoon size={30} className=\"dark\" />\r\n      ) : (\r\n        <IoIosSunny className=\"yellow\" size={30} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Theme;","import React from 'react'\r\nimport UserInfo from \"../UserInfo/UserInfo\";\r\nimport Theme from \"./Theme/Theme\"\r\nimport \"./header.css\";\r\n\r\nconst Header = () => {\r\n    return (\r\n        <div className=\"header\">\r\n            <UserInfo />\r\n            <Theme />            \r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Header;\r\n","export const MessageReaded = [\r\n    `<path \r\n          d=\"M773.495 279.073l-61.528-61.528-276.876 276.876 61.528 61.528 276.876-276.876zM958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344l246.112 246.112 61.528-61.528-246.112-246.112-61.528 61.528z\"\r\n      />`,\r\n    \"0 0 1024 1024\",\r\n  ];\r\n  \r\nexport const MessageSended = [\r\n  `<path \r\n        d=\"M958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344v0z\"\r\n    />`,\r\n  \"0 0 1024 1024\",\r\n];","import React from 'react'\r\nimport classNames from \"classnames\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as icons from \"../../icons\";\r\n\r\nconst Icon = ({ size = 20, name, className=\"\" }) => {\r\n    const [width, height] = size instanceof Array ? size : [size, size];\r\n    const [icon, viewBox] = icons[name];\r\n\r\n    return (\r\n        <svg \r\n            className={classNames(\"icon\", className)}\r\n            width={width}\r\n            height={height}\r\n            dangerouslySetInnerHTML={{__html: icon}}\r\n            viewBox={viewBox}\r\n        />\r\n    )\r\n};\r\n\r\nIcon.propTypes = {\r\n    size: PropTypes.number,\r\n    name: PropTypes.string.isRequired,\r\n    className: PropTypes.string,\r\n}\r\n\r\nexport default Icon;\r\n","import React from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\nimport dayjs from \"dayjs\";\r\nimport { IoIosTrash } from \"react-icons/io\";\r\nimport Icon from \"../../Icon/Icon\";\r\n\r\nimport \"./item.css\";\r\n\r\nconst Item = ({isReverse, isRemovable, messages, avatar, onRemove }) => {\r\n    const onRemoveHandle = (event) => {\r\n        const { id } = event.currentTarget.dataset;\r\n        onRemove(+id);\r\n    };\r\n\r\n    return (\r\n        <div \r\n            className={classNames(\"item\", {\r\n                reverse: isReverse,\r\n                removable: isRemovable,\r\n            })}>\r\n            <img src={avatar} className=\"avatar\" alt=\"Avatar\" />\r\n            <div className=\"list\">\r\n            {messages.map((item) => (\r\n                <div className=\"list-item\" key={item.id}>\r\n                    <div className=\"text\">{item.text}</div>\r\n                    <div className=\"time\">{dayjs(item.date).format(\"HH:mm\")}</div>\r\n                    <Icon \r\n                    size={15}\r\n                    className=\"message-status\"\r\n                    name={\r\n                        item.status === \"sended\" ? \"MessageSended\" : \"MessageReaded\"\r\n                    }\r\n                    />\r\n                    <IoIosTrash \r\n                        data-id={item.id}\r\n                        size={18}\r\n                        className=\"remove-message\"\r\n                        onClick={onRemoveHandle}\r\n                    />\r\n                </div>\r\n            ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nItem.propTypes = {\r\n    isReverse: PropTypes.bool.isRequired,\r\n    isRemovable: PropTypes.bool.isRequired,\r\n    avatar: PropTypes.string.isRequired,\r\n    messages: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.number.isRequired,\r\n        text: PropTypes.string.isRequired,\r\n        date: PropTypes.string.isRequired,\r\n        status: PropTypes.oneOf([\"sended\", \"readed\"]),\r\n      })\r\n    ).isRequired,\r\n    onRemove: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Item;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport dayjs from \"dayjs\";\r\nimport Calendar from \"dayjs/plugin/calendar\";\r\nimport \"./title.css\";\r\n\r\ndayjs.extend(Calendar);\r\n\r\nconst Title = ({ date }) => (\r\n  <div className=\"title\">\r\n    {dayjs(date).calendar(null, {\r\n      sameDay: \"[Сегодня]\",\r\n      lastWeek: \"DD MMMM\",\r\n      sameElse: \"DD MMMM YYYY\",\r\n    })}\r\n  </div>\r\n);\r\n\r\nTitle.propTypes = {\r\n  date: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Title;\r\n","export default function reducer(state, action) {\r\n    switch (action.type) {\r\n        case \"remove-message\":\r\n            return {\r\n                ...state,\r\n                messages: state.messages.filter(\r\n                    (message) => message.id !== action.payload\r\n                ),\r\n            };\r\n        case \"add-message\":\r\n            return {\r\n                ...state,\r\n                messages: state.messages.concat(action.payload),\r\n            }\r\n        case \"update-status\":\r\n            return {\r\n                ...state,\r\n                messages: state.messages.map((message) => {\r\n                   if (message.id === action.payload.id) {\r\n                       return {\r\n                           ...message,\r\n                           status: action.payload.status,\r\n                       };\r\n                   }\r\n                   return message;\r\n                }),\r\n            };  \r\n            default:\r\n                throw new Error(\"Unknown action type\");  \r\n    }\r\n}","const dialog = [\r\n    {\r\n      avatar:\r\n        \"https://scontent-arn2-1.xx.fbcdn.net/v/t1.6435-9/201152445_6474098629299293_6749566079502955095_n.jpg?_nc_cat=101&ccb=1-5&_nc_sid=09cbfe&_nc_eui2=AeFzrUehpsROzwVb2QRdDc9HBitf26HrAXgGK1_boesBeNnygqFM9TwtXcbIZxFUIuHoCs6OlxhTBXOtmvpvUke9&_nc_ohc=Hz-QEYnZkmYAX_qjYpk&_nc_oc=AQlebGkMsI5gzbCdNN1bnurtMDgS-VAAjmZyo5dbtYdnNjCViWQh4TFEJcmdIsIMhGw&_nc_ht=scontent-arn2-1.xx&oh=ca9d22206fe4fdbf6d298e1f3de02762&oe=6180F8DB\",\r\n      message: \"Привет\",\r\n      id: 0,\r\n      date: \"2021-10-05T10:09:04.712Z\",\r\n      is: \"her\",\r\n    },\r\n    {\r\n      avatar:\r\n        \"https://scontent-arn2-1.xx.fbcdn.net/v/t1.6435-9/201152445_6474098629299293_6749566079502955095_n.jpg?_nc_cat=101&ccb=1-5&_nc_sid=09cbfe&_nc_eui2=AeFzrUehpsROzwVb2QRdDc9HBitf26HrAXgGK1_boesBeNnygqFM9TwtXcbIZxFUIuHoCs6OlxhTBXOtmvpvUke9&_nc_ohc=Hz-QEYnZkmYAX_qjYpk&_nc_oc=AQlebGkMsI5gzbCdNN1bnurtMDgS-VAAjmZyo5dbtYdnNjCViWQh4TFEJcmdIsIMhGw&_nc_ht=scontent-arn2-1.xx&oh=ca9d22206fe4fdbf6d298e1f3de02762&oe=6180F8DB\",\r\n      message: \"Что за приложение?\",\r\n      id: 1,\r\n      date: \"2021-10-05T10:19:04.712Z\",\r\n      is: \"her\",\r\n    },\r\n    {\r\n      avatar:\r\n        \"https://scontent-arn2-1.xx.fbcdn.net/v/t1.6435-9/201152445_6474098629299293_6749566079502955095_n.jpg?_nc_cat=101&ccb=1-5&_nc_sid=09cbfe&_nc_eui2=AeFzrUehpsROzwVb2QRdDc9HBitf26HrAXgGK1_boesBeNnygqFM9TwtXcbIZxFUIuHoCs6OlxhTBXOtmvpvUke9&_nc_ohc=Hz-QEYnZkmYAX_qjYpk&_nc_oc=AQlebGkMsI5gzbCdNN1bnurtMDgS-VAAjmZyo5dbtYdnNjCViWQh4TFEJcmdIsIMhGw&_nc_ht=scontent-arn2-1.xx&oh=ca9d22206fe4fdbf6d298e1f3de02762&oe=6180F8DB\",\r\n      message: \"Какие у него возможности?\",\r\n      id: 2,\r\n      date: \"2021-10-05T10:24:04.712Z\",\r\n      is: \"her\",\r\n    },\r\n    {\r\n      avatar:\r\n        \"https://hhcdn.ru/photo/607929075.jpeg?t=1633536207&h=v9SBBbbJ9Kg8TA3qsaEZWQ\",\r\n      message: \"Привет! Это простой чат для общения\",\r\n      id: 3,\r\n      date: \"2021-10-05T05:09:04.712Z\",\r\n      status: \"sended\",\r\n      is: \"my\",\r\n    },\r\n    {\r\n      avatar:\r\n        \"https://hhcdn.ru/photo/607929075.jpeg?t=1633536207&h=v9SBBbbJ9Kg8TA3qsaEZWQ\",\r\n      message: \"Можешь менять цветовую тему чата\",\r\n      id: 4,\r\n      date: \"2021-10-05T12:09:04.712Z\",\r\n      status: \"sended\",\r\n      is: \"my\",\r\n    },\r\n    {\r\n      avatar:\r\n        \"https://hhcdn.ru/photo/607929075.jpeg?t=1633536207&h=v9SBBbbJ9Kg8TA3qsaEZWQ\",\r\n      message: \"Отправлять и удалять сообщения\",\r\n      id: 5,\r\n      date: \"2021-10-05T13:01:04.712Z\",\r\n      status: \"readed\",\r\n      is: \"my\",\r\n    },\r\n    {\r\n      avatar:\r\n        \"https://scontent-arn2-1.xx.fbcdn.net/v/t1.6435-9/201152445_6474098629299293_6749566079502955095_n.jpg?_nc_cat=101&ccb=1-5&_nc_sid=09cbfe&_nc_eui2=AeFzrUehpsROzwVb2QRdDc9HBitf26HrAXgGK1_boesBeNnygqFM9TwtXcbIZxFUIuHoCs6OlxhTBXOtmvpvUke9&_nc_ohc=Hz-QEYnZkmYAX_qjYpk&_nc_oc=AQlebGkMsI5gzbCdNN1bnurtMDgS-VAAjmZyo5dbtYdnNjCViWQh4TFEJcmdIsIMhGw&_nc_ht=scontent-arn2-1.xx&oh=ca9d22206fe4fdbf6d298e1f3de02762&oe=6180F8DB\",\r\n      message: \"Круто, мне нравится!\",\r\n      id: 7,\r\n      date: \"2021-10-05T15:09:04.712Z\",\r\n      is: \"her\",\r\n    },\r\n  ];\r\n  \r\n  export default dialog;","import React, { useReducer, useEffect, useRef } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport Item from './Item/Item';\r\nimport Title from './Title/Title';\r\nimport { normalizeDialog } from './helpers';\r\nimport reducer from './reducer';\r\nimport data from '../../data';\r\nimport './dialog.css';\r\n\r\nconst Dialog = ({ newMessage }) => {\r\n    const dialogRef = useRef();\r\n    const [state, dispatch] = useReducer(reducer, {\r\n        messages: data,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (newMessage) {\r\n            dispatch({\r\n                type: \"add-message\",\r\n                payload: newMessage,\r\n            });\r\n\r\n            setTimeout(() => {\r\n                dispatch({\r\n                    type: \"update-status\",\r\n                    payload: {\r\n                        id: newMessage.id,\r\n                        status: \"readed\",\r\n                    },\r\n                });\r\n            }, 1000);\r\n        }\r\n    }, [newMessage]);\r\n\r\n    useEffect(() => {\r\n        dialogRef.current.scrollTop = dialogRef.current.scrollHeight;\r\n    }, [state.messages.length]);\r\n\r\n    const onRemove = (id) => {\r\n        dispatch({\r\n            type: \"remove-message\",\r\n            payload: id,\r\n        });\r\n    };\r\n\r\n    const normalizedDialog = normalizeDialog(state.messages);\r\n\r\n    return (\r\n        <div className=\"dialog\">\r\n          <div className=\"overflow\" ref={dialogRef}>\r\n            {normalizedDialog.map((item) =>\r\n              item.type === \"message\" ? (\r\n                <Item {...item} key={item.id} onRemove={onRemove} />\r\n              ) : (\r\n                <Title key={item.id} date={item.date} />\r\n              )\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    };\r\n\r\nDialog.propTypes = {\r\n    newMessage: PropTypes.shape({\r\n        id: PropTypes.number,\r\n    }),\r\n};\r\n\r\nexport default Dialog;\r\n\r\n","import dayjs from \"dayjs\";\r\n\r\nexport const normalizeDialog = (dialog) => {\r\n    const newDialog = [];\r\n\r\n    dialog.forEach((item, i) => {\r\n        if (i === 0 || dialog[i - 1]) {\r\n            const first = dayjs((i === 0 ? item : dialog[i - 1]).date);\r\n            const diff = first.diff(item.date, \"day\");\r\n      \r\n            if (i === 0 || diff) {\r\n              newDialog.push({\r\n                type: \"title\",\r\n                id: `item-title-${item.id}`,\r\n                date: item.date,\r\n              });\r\n            }\r\n          }\r\n\r\n        if (i === 0 || item.is !== dialog[i - 1].is) {\r\n            newDialog.push({\r\n                type: \"message\",\r\n                id: `item-message-${item.id}`,\r\n                avatar: item.avatar,\r\n                isReverse: item.is === \"my\",\r\n                isRemovable: item.is === \"my\",\r\n                messages: [\r\n                    {\r\n                        text: item.message,\r\n                        status: item.status,\r\n                        id: item.id,\r\n                        date: item.date,\r\n                    },\r\n                ],\r\n            });\r\n        } else {\r\n            const position = newDialog.length - 1;\r\n\r\n            newDialog[position] = {\r\n                ...newDialog[position],\r\n                messages: newDialog[position].messages.concat({\r\n                    text: item.message,\r\n                    status: item.status,\r\n                    id: item.id,\r\n                    date: item.date,\r\n                  }),\r\n            };\r\n        }\r\n    });\r\n    return newDialog;\r\n};","import React, { useState } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport \"./sender.css\"\r\n\r\nconst Sender = ({onAddMessage}) => {\r\n    const [ value, setValue ] = useState(\"\");\r\n\r\n    const onChange = (event) => setValue(event.target.value);\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        onAddMessage({\r\n            id: Date.now(),\r\n            avatar: \"https://hhcdn.ru/photo/607929075.jpeg?t=1633536207&h=v9SBBbbJ9Kg8TA3qsaEZWQ\",\r\n            message: value,\r\n            date: new Date().toISOString(),\r\n            is: \"my\",\r\n            status: \"sended\",\r\n        });\r\n        setValue(\"\");\r\n    };\r\n\r\n    return (\r\n        <form className=\"sender\" onSubmit={onSubmit}>\r\n            <input\r\n                placeholder=\"Введите сообщение\"\r\n                value={value}\r\n                onChange={onChange}\r\n                required\r\n                />\r\n            <button>Отправить</button>\r\n        </form>\r\n    );\r\n};\r\n\r\nSender.propTypes = {\r\n    onAddMessage: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Sender;\r\n","import React, { useEffect, useState } from 'react';\nimport Header from \"./components/Header/Header\";\nimport Dialog from \"./components/Dialog/Dialog\";\nimport Sender from \"./components/Sender/Sender\";\n\nimport { AppContext } from \"./context\";\nimport { getTheme, setTheme } from \"./helpers/theme\";\n\nconst App = () => {\n  const [ message, addMessage ] = useState(null);\n  const [theme, toggleTheme] = useState(getTheme());\n\n  useEffect(() => {\n    setTheme(theme)\n  }, [theme])\n  \n  return (\n    <AppContext.Provider\n      value={{\n        theme,\n        toggleTheme,\n      }}\n    >\n    <div className=\"container\">\n        <Header />\n        <Dialog newMessage={message}/>\n        <Sender onAddMessage={addMessage}/>\n    </div>\n    </AppContext.Provider>\n  )\n}\n\nexport default App;\n","export const getTheme = () => {\r\n    return localStorage.getItem(\"application-theme\") || \"dark\";\r\n  };\r\n  \r\n  export const setTheme = (theme) => {\r\n    localStorage.setItem(\"application-theme\", theme);\r\n  \r\n    if (theme === \"dark\") {\r\n      document.body.classList.add(\"dark\");\r\n      document.body.classList.remove(\"light\");\r\n    } else {\r\n      document.body.classList.add(\"light\");\r\n      document.body.classList.remove(\"dark\");\r\n    }\r\n  };","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport WebFontLoader from \"webfontloader\";\nimport dayjs from \"dayjs\";\nimport App from \"./App\";\nimport \"dayjs/locale/ru\";\nimport \"./css/index.css\";\n\nWebFontLoader.load({\n  google: {\n    families: [\"Open Sans:300,400,700\"],\n  },\n});\n\ndayjs.locale(\"ru\");\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// // If you want to start measuring performance in your app, pass a function\n// // to log results (for example: reportWebVitals(console.log))\n// // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}